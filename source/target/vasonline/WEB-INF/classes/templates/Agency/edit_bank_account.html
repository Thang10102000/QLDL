<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity5"
      lang="vi">
<head th:replace="fragments/html-head">
    <meta charset="utf-8">
    <title>Chỉnh sửa tài khoản ngân hàng đại lý</title>
</head>

<body>
    <form th:action="@{/edit-bank-account}" method="post"
          th:object="${editBank}">
        <table class="table table-condensed col">
            <tr>
                <td><label for="bankAccountNo">Số tài khoản <b class="required">(*)</b></label>
                    <input type="text" name="bankAccountNo" class="form-control" placeholder="Số tài khoản"
                    id="bankAccountNo" autocomplete="off" th:field="*{bankAccountNo}" maxlength="25">
                    <span id="bankAccountNoMessage" class="required"></span>
                </td>
                <td><label for="bankName">Tên ngân hàng<b class="required">(*)</b></label>
                    <input type="text" name="bankName" class="form-control" placeholder="Tên ngân hàng" id="bankName"
                            autocomplete="off" th:field="*{bankName}">
                    <span id="bankNameMessage" class="required"></span>
                </td>
            </tr>
            <tr>
                <td><label for="bankBranch">Chi nhánh<b
                        class="required">(*)</b></label>
                    <input type="text" name="bankBranch" class="form-control" placeholder="Chi nhánh"
                           id="bankBranch" autocomplete="off" th:field="*{bankBranch}">
                    <span id="bankBranchMessage" class="required"></span>
                </td>
                <td><label for="bankAddress">Địa chỉ<b
                        class="required">(*)</b></label>
                    <input type="text" name="bankAddress" class="form-control" placeholder="Địa chỉ"
                           id="bankAddress" autocomplete="off" th:field="*{bankAddress}">
                    <input type="hidden" id="createdBy" name="createdBy"
                        th:value="${#request.userPrincipal.Principal.users.username}">
                    <input type="hidden" id="id" name="id" th:field="*{id}">
                    <span id="bankAddressMessage" class="required"></span>
                </td>
            </tr>

            <tr class='control'>
                <td colspan='4' align='center'>
                    <button type="submit" class="btn btn-primary button-control" name="doEdit" id="doEdit">
                        <i class="fa fa-pencil" aria-hidden="true"></i> Chỉnh sửa
                    </button>
                    <a type="button" id="doBack"
                       class="btn btn-primary button-control"
                       th:href="@{/bank-account}"><i class="fa fa-undo" aria-hidden="true"></i> Quay lại</a>
                </td>
            </tr>
        </table>
    </form>
<script src="/vasonline/js/custom_service.js"></script>
<script type="text/javascript">
    $(document).ready(function () {
        $('#sidebarCollapse').on('click', function () {
            $('#sidebar').toggleClass('active');
        });
        $("#bankName, #bankAccountNo, #bankBranch, #bankAddress").on("keydown", function () {
			$("#bankNameMessage, #bankAccountNoMessage, #bankBranchMessage, #bankAddressMessage").text("");
		})
    });
    //Validate
    $(document).on('click', "#doEdit" ,function (e) {
        var format = /[ `!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?~]/;
        if (format.test($("#bankName").val())) {
            $("#bankNameMessage").text("Tên ngân hàng chứa ký tự đặc biệt");
			$("#bankName").focus();
            return false;
        }
		if (format.test($("#bankAccountNo").val())) {
			$("#bankAccountNoMessage").text("Tài khoản ngân hàng chứa ký tự đặc biệt");
			$("#bankAccountNo").focus();
			return false;
		}
		if ($("#bankAccountNo").val() * 1 != $("#bankAccountNo").val()) {
			$("#bankAccountNoMessage").text(
					"Số tài khoản không đúng định dạng");
			$("#bankAccountNo").focus();
			return false;
		}
        if ($("#bankName").val() === '') {
			$("#bankNameMessage").text("Bạn chưa nhập tên ngân hàng");
			$("#bankName").focus();
            return false;
        }
        if ($("#bankAccountNo").val() === '') {
			$("#bankAccountNoMessage").text("Bạn chưa nhập số tài khoản ngân hàng");
			$("#bankAccountNo").focus();
            return false;
        }
        if ($("#bankBranch").val() === '') {
			$("#bankBranchMessage").text("Bạn chưa nhập chi nhánh");
			$("#bankBranch").focus();
            return false;
        }
        if ($("#bankAddress").val() === '') {
			$("#bankAddressMessage").text("Bạn chưa nhập địa chỉ");
			$("#bankAddress").focus();
            return false;
        }
    })
    var invalidChars = ["-", "+", "e", ",", "."];
    $("#bankAccountNo").on("keydown", function (e) {
        if (invalidChars.includes(e.key)) {
            e.preventDefault();
        }
    });
</script>
</body>

</html>