<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity5"
	lang="vi">

<head th:replace="fragments/html-head">
<meta charset="utf-8">
<title>Dashboard</title>
</head>
<body>
	<div class="wrapper" sec:authorize="isAuthenticated()">
		<!-- Sidebar  -->
		<nav id="sidebar" th:replace="fragments/sidebar"></nav>

		<!-- Page Content  -->
		<div id="content">
			<div class="div-navbar" th:replace="fragments/div-navbar"></div>
			<div style="display: flex;">
				<h3>Xin chào:</h3>
				<h3 th:utext="${#request.userPrincipal.Principal.users.username}"></h3>
			</div>
		</div>
	</div>
	<link rel="stylesheet" href="/vasonline/style/toastr.min.css">
	<script src="/vasonline/js/custom_service.js"></script>
	<script src="/vasonline/js/toastr.min.js"></script>
	<script type="text/javascript">
		$(document).ready(function() {
			$('#sidebarCollapse').on('click', function() {
				$('#sidebar').toggleClass('active');
			});

			let messageResponse = '[[${message}]]';
			if(messageResponse == 'success'){
				messageSuccess();
			}
			if (messageResponse == 'failed'){
				messageFailed();
			}
			if (messageResponse == 'WRONG_PASSWORD'){
				messageFailedPassword();
			}
			if (messageResponse == 'WRONG_OLD_PASS'){
				messageNotFoundPassword();
			}
		});

		function messageSuccess(){
			toastr.success('Thành công');
		}
		function messageFailed(){
			toastr.error('Thất bại');
		}
		function messageFailedPassword(){
			toastr.error('Mật khẩu sai chính sách hệ thống');
		}
		function messageNotFoundPassword(){
			toastr.error('Mật khẩu hiện tại không đúng');
		}
	</script>
</body>

</html>