<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity5"
	lang="vi">
<head th:replace="fragments/html-head">
<meta charset="utf-8">
<title>Quản lý AM/KAM</title>
</head>
<body>
	<div class="wrapper">
		<!-- Sidebar  -->
		<nav id="sidebar" th:replace="fragments/sidebar"></nav>

		<!-- Page Content  -->
		<div id="content">
			<div class="div-navbar" th:replace="fragments/div-navbar"></div>
			<div class="container-fluid">
				<div class="heading">
					<h4>QUẢN LÝ AM/KAM</h4>
				</div>
				<div class="box box-primary table-responsive">
					<form>
						<table class="table table-sm">
							<tr>
								<td><label for="agencyCode">Mã AM/KAM</label> <input
									type="text" class="form-control" placeholder="Mã AM/KAM"
									name="agencyCode" id="agencyCode"></td>
								<td><label for="agencyName">Tên AM/KAM</label> <input
									type="text" class="form-control" placeholder="Tên AM/KAM"
									name="agencyName" id="agencyName"></td>
							</tr>
							<tr>
								<td><label for="areaId">Công ty khu vực</label> <select
									name="areaId" id="areaId" class="form-control" th:if="${#lists.size(agencyArea) >= 2}">
										<option value=''>--Chọn công ty khu vực--</option>
										<option th:each="area : ${agencyArea}"
											th:value="${area.areaName}" th:text="${area.areaName}">
										</option>
									</select>
									<select name="areaId" id="areaId" class="form-control" th:if="${#lists.size(agencyArea) < 2}">
										<option th:each="area : ${agencyArea}"
												th:value="${area.areaName}" th:text="${area.areaName}">
										</option>
									</select>
								</td>
								<td><label for="shopCode">Mã đơn vị bán hàng</label> <input
										type="text" class="form-control" placeholder="Mã đơn vị bán hàng"
										name="shopCode" id="shopCode"></td>
							</tr>
							<tr class='control'>
								<td colspan='4' align='center'>
									<button type="button" class="btn btn-primary button-control"
										name="doSearch" id="doSearch">
										<i class="fa fa-search"></i> Tìm kiếm
									</button>
									<button type="button" class="btn btn-primary button-control"
										name="export" id="export">
										<i class="fa fa-file-excel-o"></i> Kết xuất
									</button>
									<button type="button" id="doNew" data-target="#modal-command-type-create" class="btn btn-primary button-control">
										<i class="fa fa-plus-square"></i> Thêm mới</button>
								</td>
							</tr>
						</table>
					</form>
				</div>
				<div class="list-service box box-primary">
					<table class="table table-bordered">
						<thead>
							<tr align="center">
								<th>Mã AM/KAM</th>
								<th>Tên AM/KAM</th>
								<th>MÃ ĐƠN VỊ BÁN HÀNG</th>
								<th>CTKV</th>
								<th>Hành động</th>
							</tr>
						</thead>
						<tbody id="tableBody"></tbody>
					</table>
					<nav aria-label="Page navigation">
						<ul class="pagination">
							<li class="page-item"><span id="totalPage"></span></li>
							<li class="page-item"><span id="pageSize"></span></li>
							<li class="page-item">
								<div class="form-group">
									<select class="form-control" name="selector"
										onChange="resetPage()">
										<option>10</option>
										<option>20</option>
										<option>50</option>
										<option>100</option>
										<option>200</option>
									</select>
								</div>
							</li>
							<li class="page-item"><span>&nbsp;</span></li>
							<li class="page-item"><a class="page-link"
								onClick="firstPage()"><i class="fa fa-angle-double-left"></i></a></li>
							<li class="page-item"><a class="page-link"
								onClick="prevPage()"><i class="fa fa-angle-left"></i></a></li>
							<li class="page-item"><a id="prePage"></a></li>
							<li class="page-item"><a class="page-link" id="currentPage">1</a></li>
							<li class="page-item"><a id="nexPage"></a></li>
							<li class="page-item"><a class="page-link"
								onClick="nextPage()"><i class="fa fa-angle-right"></i></a></li>
							<li class="page-item"><a class="page-link"
								onClick="lastPage()"><i class="fa fa-angle-double-right"></i></a></li>
						</ul>
					</nav>
				</div>
			</div>
		</div>
	</div>
	<!--modal form edit-->
	<div class="modal fade in" id="modal-command-type-edit" style="display: none;"  data-backdrop="static" data-keyboard="false" >
		<div class="modal-dialog modal-xl overflow-auto" style="width: 100%; margin-top: 50px;">
			<div class="modal-content">
				<div class="modal-header bg-yellow" style="display: flex;">
					<div class="title"><h4 class="modal-title">CHỈNH SỬA AM/KAM</h4></div>
					<button type="button" data-dismiss="modal" class="close" aria-label="Close">
						<span aria-hidden="true">&times;</span>
					</button>
				</div>
				<div class="modal-body" id="edit_table">

				</div>
				<div class="modal-footer" style="text-align: center;">
				</div>
			</div>
		</div>
	</div>
	<!--modal form create	-->
	<div class="modal fade in" id="modal-command-type-create" style="display: none;"  data-backdrop="static" data-keyboard="false" >
		<div class="modal-dialog modal-xl overflow-auto" style="width: 100%; margin-top: 50px;">
			<div class="modal-content">
				<div class="modal-header bg-yellow" style="display: flex;">
					<div class="title"><h4 class="modal-title">THÊM MỚI AM/KAM</h4></div>
					<button type="button" data-dismiss="modal" class="close" aria-label="Close">
						<span aria-hidden="true">&times;</span>
					</button>
				</div>
				<div class="modal-body" id="create_table">

				</div>
				<div class="modal-footer" style="text-align: center;">
				</div>
			</div>
		</div>
	</div>

	<script src="/vasonline/js/select2.min.js"></script>
	<script src="/vasonline/js/bootstrap-datepicker.min.js"></script>
	<script src="/vasonline/js/custom_service.js"></script>
	<script src="/vasonline/js/amkam-search.js"></script>
	<script type="text/javascript">
		$(function() {
			$("#doSearch").click();
		});
		function messageSuccess(){
			toastr.success('Thành công');
		}
		function messageFailed(){
			toastr.error('Thất bại');
		}
		$(document).ready(function() {
			$('#sidebarCollapse').on('click', function() {
				$('#sidebar').toggleClass('active');
			});
			let messageResponse = '[[${message}]]';
			let message = '[[${exist}]]'
			if(messageResponse == 'success'){
				messageSuccess();
			}
			if (messageResponse == 'failed'){
				messageFailed();
			}
			if (message == 'failed'){
				toastr.error('Mã AMKAM đã tồn tại');
			}
		});
	</script>
</body>

</html>