<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity5"
      lang="vi">
<head th:replace="fragments/html-head">
    <meta charset="utf-8">
    <title>Xác nhận thanh toán</title>
</head>

<body>
                <form th:action="@{/payment-confirm-update}" method="POST" id="new_pay_confirm">
                    <table class="table table-condensed col">
                        <tr>
                            <td style="width: 50%;">
                                <label for="orderId">Mã đơn hàng<b class="required">(*)</b></label>
                                <input type="text" name="orderId" class="form-control" placeholder="Mã đơn hàng"
                                       id="orderId" autocomplete="off"  th:field="*{payConfirm.orderId}" readonly>
                                <span class="required" id="orderIdMessage"></span>
                            </td>
                            <td>
                                <label for="paymentMethod">Hình thức chuyển tiền<b class="required">(*)</b></label>
                                <select name="paymentMethod" id="paymentMethod" class="form-control">
                                    <option value="1">Tiền mặt</option>
                                    <option value="2">Chuyển khoản</option>
                                    <option value="4">Thẻ Visa/ATM</option>
                                    <option value="5">Ví điện tử</option>
                                    <option value="3">Khác</option>
                                </select>
<!--                                <input type="text" name="paymentMethod" class="form-control"-->
<!--                                       placeholder="Hình thức chuyển tiền" id="paymentMethod" autocomplete="off">-->
<!--                                <span class="required" id="paymentMethodMessage" th:utext="${paymentMethod}"></span>-->
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <label for="orderPay">Số tiền hóa đơn(VNĐ)<b class="required">(*)</b></label>
                                <input type="text" data-type='currency' placeholder="Số tiền" name="orderPay"
                                       class="form-control" id="orderPay" autocomplete="off" th:value="${orderPay}" readonly>
                                <span class="required" id="orderPayMessage"></span>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <label for="amount">Số tiền trả(VNĐ)<b class="required">(*)</b></label>
                                <input type="text" data-type='currency' placeholder="Số tiền" name="amount"
                                       class="form-control" id="amount" >
                                <span class="required" id="amountMessage"></span>
                            </td>
<!--                            <td>-->
<!--                                <label for="amount">Số tiền<b class="required">(*)</b></label>-->
<!--                                <input type="text" data-type='currency' placeholder="Số tiền" name="amount"-->
<!--                                       class="form-control" id="amount" th:value="${orderPay}" >-->
<!--                                <span class="required" id="amountMessage" th:utext="${amount}"></span>-->
<!--                            </td>-->
                            <td>
                                <label for="receiverName">Người nhận <b class="required">(*)</b></label>
                                <input type="text" placeholder="Người nhận" name="receiverName" class="form-control"
                                       id="receiverName">
                                <span class="required" id="receiverNameMessage" th:utext="${receiverName}"></span>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <label for="receiverDate">Ngày nhận<b class="required">(*)</b></label>
                                <input type="text" name="receiverDate" class="form-control"
                                       placeholder="Ngày nhận" id="receiverDate" autocomplete="off">
                                <span class="required" id="receiverDateMessage" th:utext="${receiverDate}"></span>
                            </td>
                            <td>
                                <label for="description">Ghi chú</label>
                                <input type="text" name="description" class="form-control"
                                       placeholder="Ghi chú" id="description" autocomplete="off">
                            </td>
                        </tr>
                        <tr class='control'>
                            <td colspan='4' align='center'>
<!--                                <button type="button" class="btn btn-primary button-control" name="doSearch"-->
<!--                                        id="doSearch"><i class="fa fa-search"></i>-->
<!--                                    Tìm kiếm-->
<!--                                </button>-->
                                <button type="submit" class="btn btn-primary button-control" name="doNew" id="doNew"><i
                                        class="fa fa-plus-square"></i>
                                    Xác nhận thanh toán
                                </button>
                                <button type="button" id="doBack" class="btn btn-primary button-control"
                                        data-dismiss="modal" ><i class="fa fa-undo" aria-hidden="true"></i> Quay lại</button>
                            </td>
                        </tr>
                    </table>
                </form>
<!--                <div class="list-bank-agency box box-primary">-->
<!--                    <table class="table table-bordered">-->
<!--                        <thead>-->
<!--                        <tr align="center">-->
<!--                            <th>Mã đơn hàng</th>-->
<!--                            <th>Số tiền thanh toán</th>-->
<!--                            <th>Hình thức thanh toán</th>-->
<!--                            <th>Người nhận</th>-->
<!--                            <th>Ngày nhận</th>-->
<!--                            <th>Ghi chú</th>-->
<!--                        </tr>-->
<!--                        </thead>-->
<!--                        <tbody id="tableBody"></tbody>-->
<!--                    </table>-->
<!--                    <nav aria-label="Page navigation">-->
<!--                        <ul class="pagination">-->
<!--                            <li class="page-item"><span id="totalPage"></span></li>-->
<!--                            <li class="page-item"><span id="pageSize"></span></li>-->
<!--                            <li class="page-item">-->
<!--                                <div class="form-group">-->
<!--                                    <select class="form-control" name="selector"-->
<!--                                            onChange="resetPage()">-->
<!--                                        <option>10</option>-->
<!--                                        <option>20</option>-->
<!--                                        <option>50</option>-->
<!--                                        <option>100</option>-->
<!--                                        <option>200</option>-->
<!--                                    </select>-->
<!--                                </div>-->
<!--                            </li>-->
<!--                            <li class="page-item"><span>&nbsp;</span></li>-->
<!--                            <li class="page-item"><a class="page-link"-->
<!--                                                     onClick="firstPage()"><i class="fa fa-angle-double-left"></i></a>-->
<!--                            </li>-->
<!--                            <li class="page-item"><a class="page-link"-->
<!--                                                     onClick="prevPage()"><i class="fa fa-angle-left"></i></a></li>-->
<!--                            <li class="page-item"><a id="prePage"></a></li>-->
<!--                            <li class="page-item"><a class="page-link" id="currentPage">1</a></li>-->
<!--                            <li class="page-item"><a id="nexPage"></a></li>-->
<!--                            <li class="page-item"><a class="page-link"-->
<!--                                                     onClick="nextPage()"><i class="fa fa-angle-right"></i></a></li>-->
<!--                            <li class="page-item"><a class="page-link"-->
<!--                                                     onClick="lastPage()"><i class="fa fa-angle-double-right"></i></a>-->
<!--                            </li>-->
<!--                        </ul>-->
<!--                    </nav>-->
<!--                </div>-->


<script src="/vasonline/js/custom_service.js"></script>
<script src="/vasonline/js/select2.min.js"></script>
<!--<script src="/vasonline/js/pay-confirm-search.js"></script>-->
<script src="/vasonline/js/bootstrap-datepicker.min.js"></script>
<script type="text/javascript">
    $(function () {
        $("#doSearch").click();
    })
    $(document).ready(function () {
        $('#sidebarCollapse').on('click', function () {
            $('#sidebar').toggleClass('active');
        });
        $("#receiverDate").datepicker({
            format: "dd/mm/yyyy",
            todayHighlight: true,
            inline: true
        });
        $("#paymentMethod, #amount, #receiverName, #receiverDate").keydown(function () {
            $("#paymentMethodMessage, #amountMessage, #receiverDateMessage, #receiverNameMessage").text("");
        });
    });
    $(document).on("click","#doNew",function () {
        let format = /[`!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?~]/;
        if (format.test($("#paymentMethod").val())) {
            $("#paymentMethodMessage").text("Hình thức chuyển tiền không được chứa ký tự đặc biệt");
            return false;
        }
        if ($("#paymentMethod").val() === '') {
            $("#paymentMethodMessage").text("Hình thức chuyển tiền không được để trống");
            return false;
        }
        if ($("#amount").val() === '') {
            $("#amountMessage").text("Số tiền không được để trống");
            return false;
        }
        if ($("#receiverName").val() === '') {
            $("#receiverNameMessage").text("Người nhận không được để trống");
            return false;
        }
        if ($("#receiverDate").val() === '') {
            $("#receiverDateMessage").text("Ngày nhận không được để trống");
            return false;
        }
        if(parseInt($("#amount").val()) != parseInt($("#orderPay").val())) {
            $("#amountMessage").text("Số tiền thanh toán không được vượt quá hoặc ít hơn giá trị đơn hàng");
            return false;
        }
        return true;
    })
    var invalidChars = ["-", "+", "e"];
    $("#amount").on("keydown", function (e) {
        if (invalidChars.includes(e.key)) {
            e.preventDefault();
        }
    });
</script>
</body>

</html>